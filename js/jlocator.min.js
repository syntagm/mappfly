/*
 jQuery jlocator Plugin 2.0.177 
 Copyright 2012-2013 Miriam Zusin. All rights reserved.
 To use this file you must to buy a licence at http://codecanyon.net/user/no81no/portfolio 
*/
(function(k){var a=function(a,c){var h={options:a,$root:c,controller:null};h.options=$.extend(!0,{startZoom:2,storeZoom:15,latitude:33.9,longitude:20.4,geolocation:!0,markerIcon:"",markerText:"Click to Zoom",directionsType:"DRIVING",mapTypeId:"ROADMAP",jplist:{items_box:'[data-type="stores"]',item_path:'[data-type="store"]',panel_path:'[data-type="controls"]',no_results:'[data-type="no-results"]',redraw_callback:function(){},control_types:{autocomplete:{class_name:"Autocomplete",options:{}},"autocomplete-radius":{class_name:"AutocompleteRadius",
options:{}}}},openInfoWindowOnStoreClick:!1,infoWindow:function(a,b,l,f,e,m,c){return'<div class="info-window">'+a+"</div>"},storeClickEvent:"storeClickEvent",pinClickEvent:"pinClickEvent",sendStoreListEvent:"sendStoreListEvent",getStoresListEvent:"getStoresListEvent",setDirectionsEvent:"setDirectionsEvent",jumpEvent:"jumpEvent",initZoomEvent:"initZoomEvent"},a);h.controller=new $.fn.jlocator.controller(c,h.options);return k.extend(this,h)};k.fn.jlocator=function(b){return this.each(function(){var c;
c=new a(b,$(this));$(this).data("jlocator",c)})}})(jQuery);(function(k){var a=function(a,c){var h={$root:a,options:c,panel:null,map:null};h.panel=new jQuery.fn.jlocator.panel(h.$root,h.options);h.map=new jQuery.fn.jlocator.map(h.$root,h.options);return k.extend(this,h)};jQuery.fn.jlocator.controller=function(b,c){return new a(b,c)}})(jQuery);(function(k){var a=function(a,f,e,b,d){var c;f.attr("data-enabled","true");0<e.length&&(c=new google.maps.places.Autocomplete(e.get(0)),c.jlocator={latitude:b,longitude:d},google.maps.event.addListener(c,"place_changed",function(){var f,e;e=this.jlocator;if((f=c.getPlace())&&f.geometry)e=new google.maps.LatLng(e.latitude,e.longitude),f=new google.maps.LatLng(f.geometry.location.lat(),f.geometry.location.lng()),a.$root.trigger(a.options.setDirectionsEvent,[e,f])}))},b=function(b){b.$root.on("click",
'[data-type="stores"] [data-type="store"]',function(){var f,e;e=k(this);f=new jQuery.fn.jlocator.store(e,b.options);b.$root.trigger(b.options.storeClickEvent,[f]);b.$panelRoot.find('[data-type="stores"] [data-type="store"]').removeClass("active");e.addClass("active")});b.$root.on(b.options.getStoresListEvent,function(){b.$root.trigger(b.options.sendStoreListEvent,[b.stores,c(b)])});b.$root.on("click",'[data-type="directions-label"]',function(){var f=k(this),e,d,c;b.$panelRoot.find('[data-type="directions-input"]').hide(0);
0<f.length&&(d=f.attr("data-enabled"),e=f.parents('[data-type="store"]'),c=e.find('[data-type="directions-input"]'),!d&&0<e.length&&(d=Number(e.attr("data-latitude")),e=Number(e.attr("data-longitude")),!isNaN(d)&&!isNaN(e)&&a(b,f,c,d,e)),0<c.length&&((f=c.is(":visible"))?c.hide(0):c.show(0)))});b.$root.on(b.options.pinClickEvent,function(f,e){var a=e.longitude,c=e.latitude,d;k.isNumeric(a)&&k.isNumeric(c)&&(d=b.$panelRoot.find('[data-type="stores"] [data-type="store"]'),a=d.filter('[data-longitude="'+
a+'"][data-latitude="'+c+'"]'),0<a.length&&(d.removeClass("active"),a.addClass("active")))})},c=function(a){var f,e=[];a.$panelRoot.find('[data-type="stores"] [data-type="store"]').each(function(){f=new jQuery.fn.jlocator.store(k(this),a.options);e.push(f)});return e},h=function(a){var f,e=[];a.$stores.each(function(){f=new jQuery.fn.jlocator.store(k(this),a.options);e.push(f)});return e},d=function(a,f){var e=a.options.jplist.redraw_callback;0<f.length&&(a.options.jplist.redraw_callback=function(){k.isFunction(e)&&
(e(),a.$root.trigger(a.options.sendStoreListEvent,[a.stores,c(a)]))},f.jplist(a.options.jplist))},g=function(a,f){var e={$root:a,options:f,stores:[],$panelRoot:a.find('[data-type="panel"]'),$stores:null};e.$stores=e.$panelRoot.find('[data-type="stores"] [data-type="store"]');e.stores=h(e);d(e,e.$root);return k.extend(this,e)};jQuery.fn.jlocator.panel=function(a,f){var e=new g(a,f);b(e);return e}})(jQuery);(function(k){var a=function(a,e,b){a.directionsService.route({origin:e,destination:b,travelMode:google.maps.DirectionsTravelMode[a.options.directionsType]},function(e,b){b==google.maps.DirectionsStatus.OK&&a.directionsDisplay.setDirections(e)})},b=function(a){for(var e,b=0;b<a.markers.length;b++)e=a.markers[b],e.infowindow&&e.infowindow.close()},c=function(a,e){var d,c;d=new google.maps.InfoWindow;k.isFunction(a.options.infoWindow)&&d.setContent(a.options.infoWindow(e.html,e.title,e.address,e.city,
e.state,e.zipcode,e.country));c={position:e.latlng,map:a.mapCanvas,title:a.options.markerText};""!==e.customMarkerIcon?c.icon=e.customMarkerIcon:""!==a.options.markerIcon&&(c.icon=a.options.markerIcon);c=new google.maps.Marker(c);k.extend(c,{infowindow:d,store:e});a.markers.push(c);google.maps.event.addListener(c,"click",function(c){b(a);this.infowindow.open(a.mapCanvas,this);a.$root.trigger(a.options.pinClickEvent,[e])})},h=function(a){var e,b,c;a.options.geolocation&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(d){e=
d.coords.latitude;b=d.coords.longitude;c=new google.maps.LatLng(e,b);d=a.options.storeZoom;a.mapCanvas.setCenter(c);a.mapCanvas.setZoom(d)})},d=function(f){f.$root.on(f.options.jumpEvent,function(a,b,c,d){a=new google.maps.LatLng(b,c);f.mapCanvas.setCenter(a);f.mapCanvas.setZoom(d)});f.$root.on(f.options.initZoomEvent,function(a,b){f.mapCanvas.setZoom(b)});f.$root.on(f.options.storeClickEvent,function(a,c){var d;if(c&&(b(f),d=c.zoom,f.mapCanvas.setCenter(c.latlng),f.mapCanvas.setZoom(d),f.options.openInfoWindowOnStoreClick)){a:{for(var h,
g=0;g<f.markers.length;g++)if(d=f.markers[g],(h=d.store)&&h.latitude===c.latitude&&h.longitude===c.longitude)break a;d=null}d&&google.maps.event.trigger(d,"click")}});f.$root.on(f.options.sendStoreListEvent,function(a,b,d){for(b=0;b<f.markers.length;b++)a=f.markers[b],a.setMap(null);f.markers=[];for(b=0;b<d.length;b++)a=d[b],c(f,a)});f.$root.on(f.options.setDirectionsEvent,function(b,d,c){a(f,d,c)})},g=function(a,b){var c;google&&google.maps&&google.maps.event.addDomListener(window,"load",function(){a.directionsService=
new google.maps.DirectionsService;a.directionsDisplay=new google.maps.DirectionsRenderer;c=new google.maps.LatLng(a.options.latitude,a.options.longitude);a.mapCanvas=new google.maps.Map(a.$mapRoot.get(0),{mapTypeId:google.maps.MapTypeId[a.options.mapTypeId],center:c,zoom:a.options.startZoom});a.directionsDisplay.setMap(a.mapCanvas);d(a);a.$root.trigger(a.options.getStoresListEvent,[]);h(a)})},l=function(a,b){var c={$root:a,options:b,mapCanvas:null,geocoder:null,markers:[],$mapRoot:a.find('[data-type="map"]'),
directionsService:null,directionsDisplay:null};g(c,c.$mapRoot);return k.extend(this,c)};jQuery.fn.jlocator.map=function(a,b){return new l(a,b)}})(jQuery);(function(k){var a=function(a,b){var d;d=a.$element.find('[data-type="'+b+'"]');return 0<d.length?d.text():null},b=function(b,h){var d={$element:b,options:h,customMarkerIcon:"",html:"",fullAddress:"",title:"",address:"",city:"",state:"",zipcode:"",country:"",zoom:h.storeZoom,latitude:null,longitude:null,latlng:null};d.html=jQuery.fn.jplist.services.Helper.getOuterHtml(b);var g,l;d.title=a(d,"title");d.address=a(d,"address");d.city=a(d,"city");d.state=a(d,"state");d.zipcode=a(d,"zipcode");d.country=
a(d,"country");if(g=d.$element.attr("data-marker-icon"))d.customMarkerIcon=g;g=d.$element.attr("data-zoom");k.isNumeric(g)&&(d.zoom=Number(g));g=d.$element.attr("data-latitude");k.isNumeric(g)&&(d.latitude=g);l=d.$element.attr("data-longitude");k.isNumeric(l)&&(d.longitude=l);k.isNumeric(g)&&k.isNumeric(l)&&(d.latlng=new google.maps.LatLng(d.latitude,d.longitude,!0));return k.extend(this,d)};jQuery.fn.jlocator.store=function(a,h){return new b(a,h)}})(jQuery);(function(k){jQuery.fn.jplist.controls.Autocomplete={};jQuery.fn.jplist.controls.Autocomplete.render=function(a){var b,c;b={};a.controlTypeOptions&&(b=a.controlTypeOptions);b=new google.maps.places.Autocomplete(a.$control.get(0),b);c=Number(a.$control.attr("data-zoom"));isNaN(c)&&(c=17);a.$control.data("jplist-autocomplete",b);a.$control.data("jplist-autocomplete-zoom",c)};jQuery.fn.jplist.controls.Autocomplete.initEvents=function(a){var b,c=a.$control.data("jplist-handle");b=a.$control.data("jplist-autocomplete");
c&&google.maps.event.removeListener(c);c=google.maps.event.addListener(b,"place_changed",function(){var c,d,g;c=b.getPlace();c.geometry&&(d=c.geometry.location.lat(),g=c.geometry.location.lng(),a.$control.attr("data-latitude",d),a.$control.attr("data-longitude",g),a.$control.attr("data-name",c.name),a.$jplistBox.trigger("jumpEvent",[d,g,a.$control.data("jplist-autocomplete-zoom")]));a.$jplistBox.trigger(a.options.force_ask_event,[!1])});a.$control.off("keyup").on("keyup",function(b){""===k.trim(k(this).val())&&
(a.$control.attr("data-latitude",""),a.$control.attr("data-longitude",""),a.$jplistBox.trigger(a.options.force_ask_event,[!1]))});a.$control.data("jplist-handle",c)};jQuery.fn.jplist.controls.Autocomplete.setStatus=function(a,b,c){};jQuery.fn.jplist.controls.Autocomplete.getStatus=function(a,b){var c=null,h,d,g;h=b.$control.attr("data-latitude");d=b.$control.attr("data-longitude");g={name:b.$control.attr("data-name"),radius:b.$control.attr("data-radius"),filterType:"autocomplete"};a?(g.latitude="",
g.longitude="",c=new jQuery.fn.jplist.models.Status(b.name,b.action,b.type,g,!0)):k.isNumeric(h)&&k.isNumeric(d)&&(g.latitude=h,g.longitude=d,c=new jQuery.fn.jplist.models.Status(b.name,b.action,b.type,g,!0));return c}})(jQuery);(function(k){jQuery.fn.jplist.controls.AutocompleteRadius={};jQuery.fn.jplist.controls.AutocompleteRadius.render=function(a){var b,c,h,d;b={};c=a.$control.find("input");h=a.$control.find("select");a.controlTypeOptions&&(b=a.controlTypeOptions);b=new google.maps.places.Autocomplete(c.get(0),b);d=Number(a.$control.attr("data-zoom"));isNaN(d)&&(d=17);a.$control.data("jlocator-autocomplete-with-radius",b);a.$control.data("jlocator-autocomplete-with-radius-input",c);a.$control.data("jlocator-autocomplete-with-radius-select",
h);a.$control.data("jplist-autocomplete-with-radius-zoom",d)};jQuery.fn.jplist.controls.AutocompleteRadius.initEvents=function(a){var b,c=a.$control.data("jplist-handle2"),h,d;b=a.$control.data("jlocator-autocomplete-with-radius");h=a.$control.data("jlocator-autocomplete-with-radius-input");d=a.$control.data("jlocator-autocomplete-with-radius-select");c&&google.maps.event.removeListener(c);c=google.maps.event.addListener(b,"place_changed",function(){var c,d,f;c=b.getPlace();c.geometry&&(d=c.geometry.location.lat(),
f=c.geometry.location.lng(),a.$control.attr("data-latitude",d),a.$control.attr("data-longitude",f),a.$control.attr("data-name",c.name),a.$jplistBox.trigger("jumpEvent",[d,f,a.$control.data("jplist-autocomplete-with-radius-zoom")]));a.$jplistBox.trigger(a.options.force_ask_event,[!1])});0<h.length&&0<d.length&&(h.off("keyup").on("keyup",function(b){""===k.trim(k(this).val())&&(a.$control.attr("data-latitude",""),a.$control.attr("data-longitude",""),a.$jplistBox.trigger(a.options.force_ask_event,[!1]))}),
d.change(function(){a.$jplistBox.trigger(a.options.force_ask_event,[!1])}));a.$control.data("jplist-handle2",c)};jQuery.fn.jplist.controls.AutocompleteRadius.getStatus=function(a,b){var c=null,h,d,g,l;h=b.$control.attr("data-latitude");d=b.$control.attr("data-longitude");g=b.$control.attr("data-units");l=b.$control.data("jlocator-autocomplete-with-radius-select");0<l.length&&(l=parseFloat(l.val()),isNaN(l)||(g=g&&"km"===g.toString()?1E3*l:1609.34*l,g={name:b.$control.attr("data-name"),radius:g,filterType:"autocomplete"},
a?(g.latitude="",g.longitude="",c=new jQuery.fn.jplist.models.Status(b.name,b.action,b.type,g,!0)):k.isNumeric(h)&&k.isNumeric(d)&&(g.latitude=h,g.longitude=d,c=new jQuery.fn.jplist.models.Status(b.name,b.action,b.type,g,!0))));return c}})(jQuery);
